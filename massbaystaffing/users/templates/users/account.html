{% extends "base.html" %}
{% block content %}

<div class="container">
<div class="jumbotron">
  <div align='center'>
    <h1 >Account: {{current_user.username}}</h1>
    <p>{{ current_user.email }}</p>



  </div>
</div>

<div class="row">
  <div class="col-md-2">
    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">

      <a class="nav-link active" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">Edit Profile</a>
      <a class="nav-link" id="v-pills-blogs-tab" data-toggle="pill" href="#v-pills-blogs" role="tab" aria-controls="v-pills-blogs" aria-selected="false">Blogs</a>
      <a class="nav-link" id="v-pills-jobs-tab" data-toggle="pill" href="#v-pills-jobs" role="tab" aria-controls="v-pills-jobs" aria-selected="true">Jobs</a>
      <a class="nav-link" id="v-pills-newsletter-tab" data-toggle="pill" href="#v-pills-newsletter" role="tab" aria-controls="v-pills-newsletter" aria-selected="true">Send Newsletter</a>
      <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false">Settings</a>
    </div> <!-- end tab selection -->
  </div> <!-- end col-md-2 -->
  <div class="col-md-6">
<div class="tab-content" id="v-pills-tabContent">

  <div class="tab-pane fade show active" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
      <form  method="POST" action="" enctype="multipart/form-data">
        {{ form1.hidden_tag() }}
        <div class="form-group">
          {{ form1.username.label }}
          {{form1.username(class="form-control")  }}
          {% for error in form1.username.errors %}
          <span style="color: red;">{{ error }}</span>
          {% endfor %}
        </div>
        <div class="form-group">
          {{ form1.email.label }}
          {{form1.email(class="form-control")  }}
          {% for error in form1.email.errors %}
          <span style="color: red;">{{ error }}</span>
          {% endfor %}
        </div>
        <div class="form-group">
          {{ form1.submit(class="btn btn-outline-info") }}
        </div>
      </form>
  </div>

  <div class="tab-pane fade" id="v-pills-blogs" role="tabpanel" aria-labelledby="v-pills-blogs-tab">
    View and edit button on all blogs: Coming soon..

  </div>

  <div class="tab-pane fade" id="v-pills-jobs" role="tabpanel" aria-labelledby="v-pills-jobs-tab">
    Add edit/delete jobs form: Coming soon..<br><br>

    <div class="container">
      <div class="row justify-content-md-center">
        <div class="col-md-7">

      <table class="table table-dark">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Job Title</th>
            <th scope="col">Company</th>
            <th scope="col">City</th>
            <th scope="col">State</th>
            <th scope="col">Zip</th>
            <th scope="col">Job Description</th>
            <th scope="col">Delete Job</th>
          </tr>
        </thead>
        <tbody>
      {% if job_posts.items %}
        {% for post in job_posts.items %}
            <tr>
              <th scope="row">{{ post.id }}</th>
              <td>{{ post.job_title }}</td>
              <td>{{ post.company }}</td>
              <td>{{ post.city }}</td>
              <td>{{ post.state }}</td>
              <td>{{ post.zip }}</td>
              <td>{{ post.job_description[:20] }}..</td>
              <td><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#del_modal">Delete</button></td>
            </tr>
            <!-- Modal for Pop Up-->
            {# https://getbootstrap.com/docs/4.1/components/modal/ #}
            {# Notice how the link with the id to the button above! #}
            <div class="modal" tabindex="-1" role="dialog" id="del_modal">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Delete job?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>Are you sure you want to delete this job post for <strong>{{ post.job_title }}</strong>?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

                    <form action="{{ url_for('job_posts.delete_post2', job_post_id=post.id) }}" method="POST">
                      <input class="btn btn-danger" type="submit" value="Delete">
                    </form>
                  </div>
                </div>
              </div>
            </div> <!-- end model -->
       {% endfor %}
         </tbody>
       </table>
        <br>
       <nav aria-label="Page navigation example">
         <ul class="pagination justify-content-center">
           {% for page_num in job_posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
              {% if job_posts.page == page_num %}
              <li class="page-item disabled">
                <a class="page-link" href="{{ url_for('users.account', page=page_num) }}">{{ page_num }}</a></li>

              {% else %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.account', page=page_num) }}">{{ page_num }}</a></li>
                {% endif %}
        {% endfor %}
      </nav>
       {% else %}
       <h4>No jobs added</h4><br>
          {% if current_user.is_authenticated %}
          <h5><a class="btn btn-outline-info" href="{{ url_for('job_posts.create_job') }}">Add job</a></h5>
        {% else %}
        {% endif %}
       {% endif %}


      </div> <!-- end row -->
      </div> <!-- end container -->
  </div> <!-- end tab contents for jobs -->

  <div class="tab-pane fade" id="v-pills-newsletter" role="tabpanel" aria-labelledby="v-pills-newsletter-tab">
    Send newsletter form: Coming soon..
  </div>

  <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">

    Change password form + (?): Coming soon..
    <div class="row">
      <div class="col-md-4 offset-md-4">

        <!-- {% if password_checker == True %}
          <h4>The password you input is correct</h4>
        {% elif password_checker == False %}
          <h4>The password you input is not correct</h4>
        {% endif %} -->
      </div> <!-- end col-md-4 -->
    </div> <!-- end row -->

  </div> <!-- end tab -->
</div> <!-- end tab contents -->

  </div> <!-- end col-md-6 -->
    </div> <!-- end row -->
</div>



{% endblock content %}
