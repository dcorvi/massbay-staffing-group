{% extends 'base.html' %}

{% block title %}
  {{ super() }} - Positions
{% endblock %}

{% block app_content %}

<div class="container">
  <div class="row justify-content-md-center">
    <div class="col-md-12">
  <h1>{{ title }}</h1>

  <div class="container">

    {# Go through each job post #}
  {% if job_posts.items %}
    {% for post in job_posts.items %}

    <div class="card" >
      <div class="card-body">
        <h2><a class="card-title" href="  {{ url_for('job_posts.job_post', job_post_id=post.id) }}">{{ post.job_title }}</a></h2>
        <h4>{{ post.company }}</h4>
        <a href="{{ url_for('users.user_posts', username=post.jobposter.username) }}">Job poster: {{ post.jobposter.username }}</a>
        <p>Published on: {{ post.job_creation_date.strftime('%m-%d-%Y') }}</p>
        <p class="card-text">Description: {{ post.job_description[:100] }} ...</p>
        <a href="{{ url_for('job_posts.job_post', job_post_id=post.id) }}" class="btn btn-outline-info">Job Details</a>
      </div>
    </div>

   {% endfor %}

    <br>
   <nav aria-label="Page navigation example">
     <ul class="pagination justify-content-center">
       {% for page_num in job_posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
          {% if job_posts.page == page_num %}
          <li class="page-item disabled">
            <a class="page-link" href="{{ url_for('core.positions', page=page_num) }}">{{ page_num }}</a></li>

          {% else %}
          <li class="page-item"><a class="page-link" href="{{ url_for('core.positions', page=page_num) }}">{{ page_num }}</a></li>
          {% endif %}
  {% endfor %}
</nav>
   {% else %}
   <h4>No jobs added</h4><br>
      {% if current_user.is_authenticated %}
      <h5><a class="btn btn-outline-info" href="{{ url_for('job_posts.create_job') }}">Add job</a></h5>
    {% else %}
    {% endif %}
   {% endif %}
  </div> <!-- end col-md-8 -->
  </div> <!-- end row -->
  </div> <!-- end container -->

{% endblock %}
